# Whatever 音乐播放器 - 播放列表功能更新

## 新增功能

### 1. 播放列表功能
- ✅ 自动加载 `/Users/yhx/Documents/ZjmTempMusic` 文件夹中的音乐文件
- ✅ 支持的音频格式：MP3, FLAC, AAC, WAV, M4A, OGG, WMA
- ✅ 播放列表显示：标题、艺术家、专辑、时长
- ✅ 双击播放列表中的歌曲即可播放

### 2. 播放控制功能
- ✅ **上一曲按钮** (`previous_music`): 播放上一首歌曲，如果是第一首则循环到最后一首
- ✅ **下一曲按钮** (`next_music`): 播放下一首歌曲，如果是最后一首则循环到第一首
- ✅ **自动播放下一曲**: 当前歌曲播放完毕后自动播放下一首
- ✅ **播放/暂停按钮**: 改进了逻辑，如果没有选择歌曲会自动播放第一首

### 3. 用户界面改进
- ✅ **时间显示**: 显示当前播放时间和总时长 (格式: 分:秒)
- ✅ **播放列表高亮**: 当前播放的歌曲在列表中会被高亮显示
- ✅ **窗口标题更新**: 显示当前播放歌曲的名称
- ✅ **列宽优化**: 播放列表各列宽度优化显示

### 4. 菜单功能扩展
- ✅ **添加音乐文件**: 通过"文件"菜单添加单个音乐文件
- ✅ **添加音乐文件夹**: 通过"文件"菜单添加整个文件夹的音乐

## 使用方法

### 启动应用
应用启动时会自动加载 `/Users/yhx/Documents/ZjmTempMusic` 文件夹中的音乐文件。

### 播放控制
1. **播放歌曲**: 双击播放列表中的任意歌曲
2. **上一曲**: 点击"上一曲"按钮或使用键盘快捷键
3. **下一曲**: 点击"下一曲"按钮或使用键盘快捷键
4. **播放/暂停**: 点击播放/暂停按钮

### 添加音乐
1. **添加单个文件**: 文件 → 添加音乐文件...
2. **添加文件夹**: 文件 → 添加音乐文件夹...

## 技术实现

### 新增文件
- `playlistmodel.h`: 播放列表模型头文件
- `playlistmodel.cpp`: 播放列表模型实现

### 核心类和功能
- `PlaylistModel`: 继承自QAbstractTableModel，管理音乐播放列表
- `MusicTrack`: 音乐轨道数据结构，存储文件路径、标题、艺术家等信息
- 支持音频格式检测和文件夹递归扫描

### 主要改进
- 重构了播放控制逻辑
- 添加了播放列表管理功能
- 改进了用户界面交互
- 增强了时间显示和格式化

## 当前音乐文件
检测到以下音乐文件：
- Lena Raine - Pigstep (Stereo Mix).flac
- Ransom (Explicit)-Lil Tecca.mp3  
- 谢明祥 - 初夏雨后.mp3

## 下一步计划
- [ ] 添加播放模式切换（顺序、随机、单曲循环）
- [ ] 音乐元数据提取和显示
- [ ] 播放历史记录
- [ ] 播放列表保存和加载
- [ ] 音乐可视化效果
